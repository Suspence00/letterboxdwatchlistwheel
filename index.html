<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Letterboxd Watchlist Wheel</title>
  <link rel="stylesheet" href="css/main.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="favicon/favicon-16x16.png">
  <link rel="manifest" href="favicon/site.webmanifest">
  <link rel="icon" href="favicon/favicon.ico">
</head>

<body>
  <div class="holiday-snow" aria-hidden="true"></div>
  <div class="alaska-bear" aria-hidden="true">
    <div class="alaska-bear-ear"></div>
    <div class="alaska-bear-leg leg-1"></div>
    <div class="alaska-bear-leg leg-2"></div>
    <div class="alaska-bear-leg leg-3"></div>
    <div class="alaska-bear-leg leg-4"></div>
  </div>
  <header class="app-header">
    <div class="header-controls">
      <h1>Letterboxd Watchlist Wheel</h1>
      <button type="button" class="btn-icon settings-toggle" id="settings-open" aria-label="Open settings">
        <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none"
          stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="3"></circle>
          <path
            d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z">
          </path>
        </svg>
      </button>
      <div class="alaska-flag-accent" aria-hidden="true">
        <div class="alaska-star star-1"></div>
        <div class="alaska-star star-2"></div>
        <div class="alaska-star star-3"></div>
        <div class="alaska-star star-4"></div>
        <div class="alaska-star star-5"></div>
        <div class="alaska-star star-6"></div>
        <div class="alaska-star star-7"></div>
        <div class="alaska-star star-8"></div>
      </div>
    </div>
    <div class="seasonal-accent" aria-hidden="true">
      <div class="seasonal-accent__tree">
        <span class="seasonal-accent__tree-star"></span>
        <span class="seasonal-accent__tree-tier seasonal-accent__tree-tier--top"></span>
        <span class="seasonal-accent__tree-tier seasonal-accent__tree-tier--mid"></span>
        <span class="seasonal-accent__tree-tier seasonal-accent__tree-tier--bottom"></span>
        <span class="seasonal-accent__tree-trunk"></span>
        <span class="seasonal-accent__light light--1"></span>
        <span class="seasonal-accent__light light--2"></span>
        <span class="seasonal-accent__light light--3"></span>
        <span class="seasonal-accent__light light--4"></span>
        <span class="seasonal-accent__light light--5"></span>
      </div>
      <div class="seasonal-accent__candles">
        <span class="seasonal-accent__candle"></span>
        <span class="seasonal-accent__candle"></span>
        <span class="seasonal-accent__candle"></span>
        <span class="seasonal-accent__candle"></span>
        <span class="seasonal-accent__candle"></span>
        <span class="seasonal-accent__candle"></span>
        <span class="seasonal-accent__candle"></span>
        <span class="seasonal-accent__candle"></span>
        <span class="seasonal-accent__candle"></span>
      </div>
    </div>
    <p>Upload your exported watchlist, curate the entries, and spin to decide what to watch next.</p>
  </header>

  <main class="app">
    <section class="card" id="import-card" aria-labelledby="import-heading">
      <div class="card-header">
        <h2 id="import-heading">1. Bring in your Letterboxd picks</h2>
        <button type="button" class="btn card-toggle" id="import-toggle" aria-expanded="true"
          aria-controls="import-body">Collapse Step</button>
      </div>
      <div class="card-body import-body" id="import-body">
        <div class="import-section import-section--hero">
          <div class="import-hero-content">
            <div class="import-hero-text">
              <h3>Letterboxd Import</h3>
              <p class="helper-text">Paste a Letterboxd list URL or username to instantly fetch movies.</p>
            </div>

            <form id="letterboxd-proxy-form" class="import-bar">
              <div class="import-input-wrapper">
                <svg class="import-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" />
                  <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" />
                </svg>
                <input type="text" id="letterboxd-proxy-input" class="import-input" name="letterboxd-proxy-input"
                  placeholder="https://letterboxd.com/user/list/..." autocomplete="off" />
              </div>
              <button type="submit" class="btn btn--primary import-btn" id="letterboxd-proxy-open">
                <span>Fetch Movies</span>
                <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2"
                  stroke-linecap="round" stroke-linejoin="round">
                  <path d="M5 12h14M12 5l7 7-7 7" />
                </svg>
              </button>
            </form>
            <p class="status" id="letterboxd-proxy-status" role="status" aria-live="polite"></p>


          </div>
        </div>

        <div class="import-divider">
          <span>OR</span>
        </div>

        <div class="import-section import-section--secondary">
          <div class="file-upload-wrapper">
            <label class="file-drop-zone" for="csv-input">
              <div class="file-drop-content">
                <svg class="file-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                  <polyline points="17 8 12 3 7 8" />
                  <line x1="12" y1="3" x2="12" y2="15" />
                </svg>
                <span class="file-label">Upload CSV File</span>
                <span class="file-hint">Export from Letterboxd Settings</span>
              </div>
              <input type="file" id="csv-input" accept=".csv" />
            </label>
          </div>

          <div class="import-extras">
            <a href="https://lizard.streamlit.app/" target="_blank" rel="noopener noreferrer" class="link-subtle">Need a
              CSV? Use the download helper &nearr;</a>
            <p class="status" id="status-message" role="status" aria-live="polite"></p>
          </div>
        </div>
      </div>
    </section>

    <section class="card" id="selection-card" aria-labelledby="selection-heading">
      <div class="card-header card-header--selection">
        <div class="card-header__section">
          <h2 id="selection-heading">2. Curate your wheel</h2>
        </div>
        <div class="card-header__section">
          <button type="button" class="btn" id="open-custom-modal">Add Custom Movie</button>
          <button type="button" class="btn" id="random-boost-btn"
            title="Spin with temporary 1x weights, winner gets +1x boost">‚ò∏Ô∏è Random Boost</button>
          <button type="button" class="btn" id="select-all">Select all</button>
          <button type="button" class="btn" id="clear-selection">Clear all</button>
          <button type="button" class="btn" id="reset-weights">Reset all weights</button>
        </div>
        <button type="button" class="btn card-toggle" id="selection-toggle" aria-expanded="true"
          aria-controls="selection-body">Collapse Step</button>
      </div>
      </div>
      <div class="card-body" id="selection-body">

        <div class="selection-area">
          <div class="selection-controls">
            <label class="visually-hidden" for="movie-search">Search your picks</label>
            <div class="selection-search selection-search--standalone">
              <input type="search" id="movie-search" class="text-input" name="movie-search"
                placeholder="Search titles or years" autocomplete="off" />
            </div>
            <div class="selection-sort">
              <label class="visually-hidden" for="movie-sort">Sort movies</label>
              <select id="movie-sort" class="text-input text-input--select" aria-label="Sort movies">
                <option value="original">Original order</option>
                <option value="name-asc">Name A-Z</option>
                <option value="name-desc">Name Z-A</option>
                <option value="weight-desc">Weight high to low</option>
                <option value="weight-asc">Weight low to high</option>
              </select>
            </div>
          </div>
          <div class="movie-list-wrapper">
            <ul id="movie-list" class="movie-list" aria-live="polite"></ul>
          </div>
        </div>
      </div>
    </section>



    <section class="card" aria-labelledby="spin-heading">
      <div class="card-header card-header--spin">
        <h2 id="spin-heading">3. Spin the wheel</h2>
        <div class="card-header__section">
          <button type="button" class="btn" id="history-btn">History</button>
          <button type="button" class="btn sound-toggle" id="wheel-sound-toggle" aria-pressed="false"
            aria-label="Toggle wheel sound effects">
            <span class="sound-toggle__icon" aria-hidden="true">
              <svg class="sound-toggle__svg" viewBox="0 0 32 32" role="presentation" focusable="false">
                <path class="sound-toggle__speaker" d="M6 12h6l8-6v20l-8-6H6z" />
                <path class="sound-toggle__waves" d="M21 11c2.2 2.2 2.2 7.8 0 10m4-13c3.2 3.6 3.2 12.4 0 16" />
                <path class="sound-toggle__slash" d="M7 7l18 18" />
              </svg>
            </span>
            <span class="sound-toggle__text">Mute wheel sounds</span>
          </button>
        </div>
      </div>
      <div class="card-body">
        <div class="spin-mode-selector">
          <label class="spin-mode-option">
            <input type="radio" name="spin-mode" value="knockout" checked>
            <div class="spin-mode-card">
              <span class="spin-mode-title">Knockout Mode</span>
              <span class="spin-mode-desc">Elimination rounds until one movie remains.</span>
            </div>
          </label>
          <label class="spin-mode-option">
            <input type="radio" name="spin-mode" value="one-spin">
            <div class="spin-mode-card">
              <span class="spin-mode-title">1 Spin Mode</span>
              <span class="spin-mode-desc">Single dramatic spin. Weights increase winning change.</span>
            </div>
          </label>
        </div>
        <div class="wheel-section">
          <div class="wheel-wrapper">
            <p class="result" id="result" aria-live="polite"></p>
            <div class="wheel-layout" id="wheel-layout">
              <div class="wheel-aside" id="wheel-aside">
                <section class="knockout-remaining" id="knockout-remaining" aria-live="polite" hidden>
                  <div class="knockout-remaining__header">
                    <p class="knockout-remaining__title">Final Contenders!</p>
                  </div>
                  <ol class="knockout-remaining__list" id="knockout-remaining-list"></ol>
                </section>
                <section class="slice-editor" id="slice-editor" aria-live="polite" hidden>
                  <div class="slice-editor__header">
                    <h3 class="slice-editor__title">Slice editor</h3>
                    <button type="button" class="btn" id="slice-editor-clear">Close</button>
                  </div>
                  <p class="slice-editor__hint" id="slice-editor-hint">Click a wheel slice to adjust its color and
                    weight.</p>
                  <div class="slice-editor__body" id="slice-editor-body" hidden>
                    <div class="slice-editor__row">
                      <p class="slice-editor__name" id="slice-editor-name"></p>
                      <span class="slice-editor__swatch" id="slice-color-swatch" aria-hidden="true"></span>
                    </div>
                    <label class="slice-editor__field" for="slice-color">
                      <span class="slice-editor__label">Slice color</span>
                      <input type="color" id="slice-color" class="slice-editor__color" name="slice-color"
                        value="#ff8600" />
                    </label>
                    <label class="slice-editor__field" for="slice-weight">
                      <div class="slice-editor__label-group">
                        <div class="slice-editor__label-stack">
                          <span class="slice-editor__label" id="slice-weight-label">Slice weight</span>
                          <span class="weight-help" id="slice-weight-help" role="img"
                            aria-label="Adjust how often this slice appears."
                            title="Adjust how often this slice appears.">?</span>
                        </div>
                        <span class="slice-editor__weight-value" id="slice-weight-value">1x</span>
                      </div>
                      <input type="range" id="slice-weight" class="slice-editor__range" name="slice-weight" min="1"
                        max="5" step="1" value="1" aria-valuemin="1" aria-valuemax="5" aria-valuenow="1" />
                    </label>
                    <div class="slice-editor__odds">
                      <div class="slice-editor__odds-row">
                        <span class="slice-editor__label" id="slice-odds-label-risk">Pick risk this spin</span>
                        <span class="slice-editor__odds-value" id="slice-odds-value-risk">0%</span>
                      </div>
                      <div class="slice-editor__odds-row">
                        <span class="slice-editor__label" id="slice-odds-label-win">Odds to be final winner</span>
                        <span class="slice-editor__odds-value slice-editor__odds-value--secondary"
                          id="slice-odds-value-win">0%</span>
                      </div>
                    </div>
                  </div>
                </section>
              </div>
              <div class="wheel-stage">
                <canvas id="wheel" width="720" height="720" role="img" aria-label="Wheel of selected movies"></canvas>
                <div class="pointer" aria-hidden="true"></div>
              </div>
            </div>
            <button type="button" class="btn primary" id="spin-button" disabled>Spin the wheel</button>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer class="app-footer">
    <p>Praise the wheel!</p>
  </footer>

  <div id="confetti-container" class="confetti-container" aria-hidden="true"></div>

  <div id="custom-entry-modal" class="win-modal" role="dialog" aria-modal="true" aria-labelledby="custom-modal-title"
    hidden>
    <div class="win-modal__content settings-modal__content" style="padding: 2rem;">
      <button type="button" class="win-modal__close" id="custom-modal-close" aria-label="Close dialog">&times;</button>
      <h3 id="custom-modal-title" class="win-modal__title" style="padding-left: 0;">Add Custom Entry</h3>

      <form id="custom-entry-form" class="custom-entry__form" style="margin-top: 1rem;">
        <label for="custom-entry-name" style="display:block; margin-bottom: 0.5rem; font-weight: 600;">Movie Name or
          Entry</label>
        <input type="text" id="custom-entry-name" class="text-input" name="custom-entry-name"
          placeholder="Anything goes ‚Äî add a wildcard pick" autocomplete="off"
          style="width: 100%; margin-bottom: 1rem; flex: 0 0 auto;" />
        <p class="helper-text" style="margin-bottom: 2rem;">Add anything you'd like to include alongside your Letterboxd
          picks.</p>

        <div class="win-modal__actions" style="justify-content: flex-end;">
          <button type="submit" class="btn btn--primary" id="add-custom-entry">Add to Wheel</button>
        </div>
      </form>
    </div>
  </div>

  <div id="input-modal" class="win-modal" role="dialog" aria-modal="true" aria-labelledby="input-modal-title" hidden>
    <div class="win-modal__content settings-modal__content" style="padding: 2rem;">
      <button type="button" class="win-modal__close" id="input-modal-close" aria-label="Close dialog">&times;</button>
      <h3 id="input-modal-title" class="win-modal__title" style="padding-left: 0;"></h3>
      <form id="input-modal-form" class="custom-entry__form" style="margin-top: 1rem;">
        <label for="input-modal-field" id="input-modal-label"
          style="display:block; margin-bottom: 0.5rem; font-weight: 600;"></label>
        <input type="text" id="input-modal-field" class="text-input" name="input-modal-field" autocomplete="off"
          style="width: 100%; margin-bottom: 2rem; flex: 0 0 auto;" />
        <div class="win-modal__actions" style="justify-content: flex-end;">
          <button type="submit" class="btn btn--primary" id="input-modal-submit">Confirm</button>
        </div>
      </form>
    </div>
  </div>

  <div id="win-modal" class="win-modal" role="dialog" aria-modal="true" aria-labelledby="win-modal-title" hidden>
    <div class="win-modal__content">
      <button type="button" class="win-modal__close" id="win-modal-close"
        aria-label="Close winner dialog">&times;</button>
      <h3 id="win-modal-title" class="win-modal__title"></h3>
      <p id="win-modal-details" class="win-modal__details"></p>
      <div class="win-modal__body">
        <figure class="win-modal__poster" id="win-modal-poster-wrapper" hidden>
          <img id="win-modal-poster" src="" alt="" />
        </figure>
        <div class="win-modal__meta">
          <p id="win-modal-runtime" class="win-modal__runtime" aria-live="polite">Looking up runtime‚Ä¶</p>
          <p id="win-modal-synopsis" class="win-modal__synopsis">Fetching synopsis‚Ä¶</p>
        </div>
      </div>
      <div class="win-modal__actions">
        <a id="win-modal-link" class="win-modal__action win-modal__action--letterboxd hidden" href="#" target="_blank"
          rel="noopener noreferrer">View on Letterboxd</a>
        <a id="win-modal-trailer" class="win-modal__action win-modal__action--trailer hidden" href="#" target="_blank"
          rel="noopener noreferrer">Find a trailer</a>
      </div>
    </div>
  </div>

  <div id="history-modal" class="win-modal" role="dialog" aria-modal="true" aria-labelledby="history-modal-title"
    hidden>
    <div class="win-modal__content history-modal__content">
      <button type="button" class="win-modal__close" id="history-modal-close"
        aria-label="Close history dialog">&times;</button>
      <h3 id="history-modal-title" class="win-modal__title">Spin History</h3>
      <div class="history-list-wrapper">
        <ul id="history-list" class="history-list"></ul>
        <p id="history-empty-msg" class="helper-text" hidden>No history yet. Spin the wheel!</p>
      </div>
      <div class="win-modal__actions">
        <button type="button" class="btn danger" id="clear-history-btn">Clear History</button>
      </div>
    </div>
  </div>

  <div id="settings-modal" class="win-modal" role="dialog" aria-modal="true" aria-labelledby="settings-modal-title"
    hidden>
    <div class="win-modal__content settings-modal__content">
      <button type="button" class="win-modal__close" id="settings-modal-close"
        aria-label="Close settings">&times;</button>
      <h3 id="settings-modal-title" class="win-modal__title">Settings</h3>

      <div class="settings-tabs" role="tablist">
        <button type="button" class="settings-tab-btn" role="tab" aria-selected="true" aria-controls="tab-options"
          id="tab-btn-options">Options</button>
        <button type="button" class="settings-tab-btn" role="tab" aria-selected="false" aria-controls="tab-data"
          id="tab-btn-data">Data</button>
        <button type="button" class="settings-tab-btn" role="tab" aria-selected="false" aria-controls="tab-discord"
          id="tab-btn-discord">Discord</button>
        <button type="button" class="settings-tab-btn" role="tab" aria-selected="false" aria-controls="tab-boards"
          id="tab-btn-boards">Boards</button>
        <button type="button" class="settings-tab-btn" role="tab" aria-selected="false" aria-controls="tab-advanced"
          id="tab-btn-advanced">Advanced</button>
      </div>

      <div class="settings-tab-content">
        <!-- Tab 1: Wheel Options -->
        <div id="tab-options" role="tabpanel" aria-labelledby="tab-btn-options" class="settings-panel">
          <fieldset class="settings-group">
            <legend>Theme</legend>
            <div class="settings-row">
              <label for="theme-select">Visual Theme</label>
              <select id="theme-select" class="text-input text-input--select">
                <option value="default">Classic</option>
                <option value="holiday">Christmas</option>
                <option value="hanukkah">Hanukkah</option>
                <option value="cyber">Cyber</option>
                <option value="modern">Modern</option>
                <option value="alaska">Alaska</option>
              </select>
            </div>
          </fieldset>

          <fieldset class="settings-group">
            <legend>Filters</legend>
            <label class="filter-toggle" for="filter-show-customs">
              <input type="checkbox" id="filter-show-customs" checked />
              <span>Show custom selections</span>
            </label>
          </fieldset>

          <fieldset class="settings-group">
            <legend>Display</legend>
            <label class="filter-toggle" for="finalists-always-visible">
              <input type="checkbox" id="finalists-always-visible" />
              <span>Show Final Contenders from start</span>
            </label>
            <label class="filter-toggle" for="finalists-hide-box">
              <input type="checkbox" id="finalists-hide-box" />
              <span>Hide Final Contenders box</span>
            </label>
          </fieldset>
        </div>

        <!-- Tab 2: Data (Import/Export) -->
        <div id="tab-data" role="tabpanel" aria-labelledby="tab-btn-data" class="settings-panel" hidden>
          <div class="data-transfer__grid">
            <div class="data-transfer__card">
              <h4>Export Wheel</h4>
              <p class="helper-text">Save movies, weights, and history.</p>
              <div class="data-transfer__actions">
                <button type="button" class="btn" id="backup-export">Download .wheel</button>
                <button type="button" class="btn" id="backup-copy">Copy String</button>
              </div>
              <p class="status" id="backup-export-status" role="status" aria-live="polite"></p>
            </div>

            <div class="data-transfer__card">
              <h4>Import Wheel</h4>
              <p class="helper-text">Restore from a backup.</p>

              <div class="backup-modal__fields">
                <textarea id="backup-text" class="text-input text-input--textarea" name="backup-text" rows="4"
                  placeholder="Paste backup JSON or .wheel text here"></textarea>

                <label class="file-input file-input--inline" for="backup-file">
                  <span class="file-label">Upload .wheel file</span>
                  <input type="file" id="backup-file" accept=".wheel,application/json,text/plain" />
                </label>

                <label class="filter-toggle" for="backup-import-history">
                  <input type="checkbox" id="backup-import-history" checked />
                  <span>Replace history with backup</span>
                </label>
              </div>

              <div class="backup-modal__actions">
                <button type="button" class="btn" id="backup-apply">Apply weights only</button>
                <button type="button" class="btn danger" id="backup-restore">Full Restore</button>
              </div>
              <p class="status" id="backup-import-status" role="status" aria-live="polite"></p>

            </div>
          </div>
        </div>
        <!-- Tab 3: Discord Integration -->
        <div id="tab-discord" role="tabpanel" aria-labelledby="tab-btn-discord" class="settings-panel" hidden>
          <fieldset class="settings-group">
            <legend>Webhook Integration</legend>
            <div class="settings-row">
              <p class="helper-text">Send a notification to a Discord channel when a winner is picked.</p>
              <details class="discord-help">
                <summary class="discord-help__summary" aria-label="How to configure">?</summary>
                <div class="discord-help__content">
                  <p><strong>How to get a Webhook URL:</strong></p>
                  <ol>
                    <li>Open Discord and <strong>Edit Channel</strong> settings.</li>
                    <li>Go to <strong>Integrations</strong> &gt; <strong>Webhooks</strong>.</li>
                    <li>Create a <strong>New Webhook</strong>.</li>
                    <li>Copy the <strong>Webhook URL</strong> and paste it below.</li>
                  </ol>
                </div>
              </details>
            </div>

            <div class="backup-modal__fields">
              <label for="discord-webhook-url">Webhook URL</label>
              <input type="text" id="discord-webhook-url" class="text-input"
                placeholder="https://discord.com/api/webhooks/..." autocomplete="off">
            </div>

            <div class="backup-modal__actions">
              <button type="button" class="btn" id="discord-test-btn">Test Notification</button>
            </div>
          </fieldset>
          </fieldset>
        </div>

        <!-- Tab 4: Boards Management -->
        <div id="tab-boards" role="tabpanel" aria-labelledby="tab-btn-boards" class="settings-panel" hidden>
          <div class="data-transfer__grid">
            <div class="data-transfer__card">
              <h4>Active Board</h4>
              <p class="helper-text">Select which watchlist board you want to use.</p>
              <select id="workspace-select" class="text-input text-input--select text-input--compact"
                aria-label="Switch Workspace">
                <!-- Populated by JS -->
              </select>
            </div>

            <div class="data-transfer__card">
              <h4>Create New Board</h4>
              <form id="create-board-form" class="board-create-form">
                <input type="text" id="new-board-name" class="text-input" placeholder="Board Name (e.g. Horror Month)"
                  required autocomplete="off">
                <button type="submit" class="btn btn--primary">Create</button>
              </form>
            </div>

            <div class="data-transfer__card data-transfer__card--full">
              <h4>My Boards</h4>
              <ul id="boards-list" class="boards-list">
                <!-- Populated by JS -->
              </ul>
            </div>
          </div>
        </div>

        <!-- Tab 5: Advanced -->
        <div id="tab-advanced" role="tabpanel" aria-labelledby="tab-btn-advanced" class="settings-panel" hidden>
          <div class="data-transfer__grid">
            <div class="data-transfer__card">
              <h4>System Audit</h4>
              <p class="helper-text">Run a 10,000 spin Monte Carlo simulation to verify fairness.</p>
              <button type="button" class="btn" id="verify-fairness-btn">üõ°Ô∏è Verify Fairness</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  </div>

  <section class="wheel-fm" aria-labelledby="wheel-fm-heading">
    <div class="wheel-fm__heading">
      <p class="wheel-fm__eyebrow" id="wheel-fm-heading">Wheel.FM</p>
      <div class="wheel-fm__header-controls">
        <button type="button" class="wheel-fm__minimize" id="wheel-fm-minimize" aria-label="Minimize Wheel.FM"
          aria-expanded="true">_</button>
      </div>
    </div>
    <div class="wheel-fm__content" id="wheel-fm-content">
      <p class="wheel-fm__tagline">Praise the Wheel!</p>
      <div class="wheel-fm__player" aria-live="polite">
        <button type="button" class="wheel-fm__control wheel-fm__control--prev" id="wheel-fm-prev"
          aria-label="Play previous track"></button>
        <button type="button" class="wheel-fm__control wheel-fm__control--play" id="wheel-fm-play"
          aria-label="Play or pause Wheel.FM"></button>
        <button type="button" class="wheel-fm__control wheel-fm__control--next" id="wheel-fm-next"
          aria-label="Skip to next track"></button>
        <div class="wheel-fm__track">
          <p class="wheel-fm__track-title" id="wheel-fm-track-title">Awaiting playlist‚Ä¶</p>
          <p class="wheel-fm__track-artist" id="wheel-fm-track-artist"></p>
        </div>
      </div>
      <div class="wheel-fm__playlist">
        <label class="wheel-fm__playlist-label" for="wheel-fm-channel">Channel</label>
        <select id="wheel-fm-channel" class="wheel-fm__playlist-select" aria-label="Select Wheel.FM Channel">
          <option value="">Loading Channels...</option>
        </select>

        <label class="wheel-fm__playlist-label" for="wheel-fm-playlist">Playlist</label>
        <select id="wheel-fm-playlist" class="wheel-fm__playlist-select" disabled aria-label="Pick a Wheel.FM track">
          <option>Loading‚Ä¶</option>
        </select>
        <p class="wheel-fm__playlist-meta" id="wheel-fm-playlist-meta">Waiting for tracks</p>
      </div>
      <div class="wheel-fm__volume">
        <label class="wheel-fm__volume-label" for="wheel-fm-volume">Volume</label>
        <input type="range" id="wheel-fm-volume" class="wheel-fm__volume-slider" min="0" max="100" step="1" value="80"
          aria-valuemin="0" aria-valuemax="100" aria-valuenow="80" aria-label="Wheel.FM volume" />
        <span class="wheel-fm__volume-value" id="wheel-fm-volume-value">80%</span>
      </div>
      <div class="wheel-fm__progress">
        <span class="wheel-fm__time" id="wheel-fm-current-time">0:00</span>
        <label class="visually-hidden" for="wheel-fm-seek">Wheel.FM progress</label>
        <input type="range" id="wheel-fm-seek" class="wheel-fm__seek" min="0" max="100" step="0.1" value="0" disabled />
        <span class="wheel-fm__time" id="wheel-fm-duration">0:00</span>
      </div>
      <p class="wheel-fm__status" id="wheel-fm-status">Add MP3s to <code>wheel-fm/</code> to start broadcasting.</p>
      <audio id="wheel-fm-audio" preload="metadata" hidden></audio>
    </div>
  </section>

  <div id="boost-modal" class="win-modal" role="dialog" aria-modal="true" aria-labelledby="boost-modal-title" hidden>
    <div class="win-modal__content boost-modal__content">
      <button type="button" class="win-modal__close" id="boost-modal-close"
        aria-label="Close boost station">&times;</button>
      <h3 id="boost-modal-title" class="win-modal__title">Boost Station</h3>

      <div class="boost-form">
        <label for="boost-booster-name">Booster Name</label>
        <input type="text" id="boost-booster-name" class="text-input" placeholder="Who is boosting?"
          autocomplete="off" />

        <div class="boost-selector-group">
          <label for="boost-movie-filter">Select Movie to Boost</label>
          <input type="text" id="boost-movie-filter" class="text-input text-input--small" placeholder="Filter movies..."
            autocomplete="off">
          <select id="boost-movie-select" class="text-input text-input--select" size="6">
            <!-- Populated by JS -->
          </select>
        </div>

        <div class="boost-actions-row">
          <button type="button" class="btn" id="btn-boost-specific" disabled>Boost Selected</button>
          <button type="button" class="btn btn--danger" id="btn-boost-remove" disabled
            title="Remove 1x weight from selected">Remove</button>
          <span class="boost-or">OR</span>
          <button type="button" class="btn btn--accent" id="btn-boost-random">Random Boost</button>
        </div>
      </div>
    </div>
  </div>

  <script>console.log('Inline script executed');</script>
  <!-- Verification Modal -->
  <div id="verify-modal" class="win-modal" hidden>
    <div class="win-modal__content settings-modal__content" role="dialog" aria-modal="true"
      aria-labelledby="verify-title">
      <button type="button" class="win-modal__close" id="verify-close" aria-label="Close">√ó</button>
      <h2 id="verify-title" class="win-modal__title">Fairness Audit Report</h2>

      <div style="padding: 1.5rem; flex: 1; overflow-y: auto; display: flex; flex-direction: column;">
        <div id="verify-summary" style="margin-bottom: 1rem; color: #edf2f7;"></div>
        <p class="helper-text" style="color: #a0aec0; margin-bottom: 1rem;">Simulation of <strong>10,000 spins</strong>
          based on current weights.</p>
        <div class="verify-table-container" style="display: block; visibility: visible;">
          <table class="verify-table" id="verify-table">
            <thead>
              <tr>
                <th>Movie</th>
                <th>Weight</th>
                <th>Expected</th>
                <th>Actual</th>
                <th>Diff</th>
              </tr>
            </thead>
            <tbody>
              <!-- Populated by JS -->
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <script type="module" src="js/main.js"></script>
</body>

</html>